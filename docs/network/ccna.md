## 七层协议 、TCP/IP协议

IP、TCP、UDP协议；

telnet是通过协议来进行网络通信（远程登录），设置通信；telnet是明文传输的；

TFTP看不到文件内容，FTP能够看到文件目录；

SNMP网络设备检查协议；(solarwind)



## DNS domain namespace

--root domain(13个根域名)

--first level domain

--second level domain

> DNS recursion and iterative
>
> DNS递归，本地的DNS没有域名，会回溯到root顶级服务器；再次从其他域名访问；
>
> DNS迭代，一次遍历DNS根服务器进行域名查询;
>
> 实际过程中，迭代和递归是联合在一起使用；

## TCP三次握手

> tcp三次握手，sync、sync-ack、ack
>
> buffer是来协调发送个处理之间的速度；
>
> 为了放置缓冲溢出，要进行流量控制；datagram --数据包，diagram--数据图表;

数据序列、数据确认--因为数据文件切分为数据包，数据发送顺序是错乱的；

> **TCP建立连接**
>
> TCP建立连接，也就是我们常说的三次握手，它需要三步完成。在TCP的三次握手中，发送第一个SYN的一端执行的是主动打开。而接收这个SYN并发回下一个SYN的另一端执行的是被动打开。
>
> 这里以客户端向服务器发起连接来说明。
>
> **1) 第1步** ：客户端向服务器发送一个同步数据包请求建立连接，该数据包中，初始序列号（ISN）是客户端随机产生的一个值，确认号是0；
>
> **2) 第2步** ：服务器收到这个同步请求数据包后，会对客户端进行一个同步确认。这个数据包中，序列号（ISN）是服务器随机产生的一个值，确认号是客户端的初始序列号+1；
>
> **3) 第3步** ：客户端收到这个同步确认数据包后，再对服务器进行一个确认。该数据包中，序列号是上一个同步请求数据包中的确认号值，确认号是服务器的初始序列号+1。
>
> **注意** ：因为一个SYN将占用一个序号，所以要加1。
>
> 初始序列号（ISN）随时间而变化的，而且不同的操作系统也会有不同的实现方式，所以每个连接的初始序列号是不同的。TCP连接两端会在建立连接时，交互一些信息，如窗口大小、MSS等，以便为接着的数据传输做准备。
>
> RFC793指出ISN可以看作是一个32bit的计数器，每4ms加1，这样选择序号的目的在于防止在网络中被延迟的分组在以后被重复传输，而导致某个连接的一端对它作错误的判断。

window control--窗口控制；

tcp retransmission--重传机制；

> TCP头有24个字节，4个保留字节；
>
> TCP采用CRC校验；检验数据包的正确性；
>
> UDP头部8个字节；有自己的CRC校验；



数据链路层：使用最多的是以太网协议；（Frame）

IP地址32bit，MAC地址48bit

MAC地址中的TYPE决定传输的数据类型，最后以为是CRC校验码；

所有的MAC地址是在一个平面，没有层级之分；IP地址有层级之分；便于路由；



## IP地址

IP地址=网络地址+主机地址

根据网络的大小对网段进行分类；共分为五类；



arp：2.5层协议；建立IP和MAC的地址映射；

arp 建立对应关系；保存到本地；

--二层广播和三层广播；每个网段最后一位地址是保留作为广播；

通过arp协议来进行广播；

广播的数据包，目标地址(二层的目标MAC地址)都是FFFFFFFF,二层交换机都会转发出去；

单播和组播；

## 子网划分

> 子网划分借主机位的时候，此时IP地址就是无类别；
>
> 主机位=子网位+网络地址位;借位的那一位使用1来表示；
>
> 子网掩码能够识别地址是否是c类还是无类别IP地址; subnet mask能够区分是否是同一个网段；
>
> CIDR--数字表示网络位,eg /24
>
> /32--表示一个主机
>
> /30--最小的主机网段,2个
>
> /31-实际上最小的网段，0个主机--点对点，有些厂商可以配置/31，有写是不可以;
>
> subnet-zero 划分后的第一个网段;--默认开启之后，才能使用subnet-zero

  172.16.10.0/17 ,这是一个IP地址，结尾是0和255 不一定是一个网段，也可能是一个地址；

